{% extends "base.html" %}

{% block title %} Nomina {% endblock title %}

{% block content %}

	<div class="Nomina">
		
		<div class="generar-nomina" ng-controller="GeneraNominaCtrl">
			
			<div class="sub-menu">
				Generar Nomina de la Cooperativa

				<a class="DownArrow" href="#" ng-click="toggleGN()"></a>

			</div>

			<form name="FormGeneraNomina" class="genera-nomina" ng-show="showGN" ng-submit="generarNomina()" novalidate>
				<ul> 
					<li><p class="fecha-nomina">Fecha de la Nomina</p></li>
					<li><input class="fecha-nomina-t" type="text" name="fechaNomina" id="fechaNomina" ng-model="nominaH.fechaNomina" datepicker required/></li>
				</ul>

				<ul>
					<li><p class="tipo-nomina">Tipo de Nomina</p></li>
					<li>
						<select class="tipo-nomina-t field-choices" name="tipoNomina" ng-init="tiposNominas()" ng-model="nominaH.tipoNomina" required>
							<option ng-repeat="item in tiposN" value="[[item.id]]">[[item.descripcion]]</option>
						</select>			
					</li>
				</ul>
				
				<div class="nomina-nota">Nota:</div>
				<textarea class="nomina-nota-t" id="Nota" ng-model="nominaH.nota"> </textarea>

				<button class="icon-cog Boton boton-genera-nomina" type="submit"> Generar Nomina </button>

			</form>
			[[FormGeneraNomina.$valid]]
		</div>

		<div class="consultar-nomina" ng-controller="ConsultarNominaCtrl">
			
			<div class="sub-menu nomina-consultar">
				Consultar Nominas

				<a class="DownArrow" href="#" ng-click="toggleCN()"></a>

			</div>

			<div class="nominas" ng-show="showCN" ng-init="getNominasGeneradas()">
				
				<div class="nominas-select">
					<div class="nomina-sel">Nomina</div>
					
					<select class="nomina-sel-text" name="NominaSel" ng-model="nominaS" ng-init="getNominasGeneradas()">
						<option ng-repeat="item in nominas" value="[[item.fechaNomina]]"> [[item.fechaNomina | date: 'dd-MM-yyyy']]</option>
					</select>
				</div>
				
				<div class="nominas-content">
					<table class="consultar-nominas-table">
						<tr class="nomina-sel-header">
							<td>Estatus</td>
							<td>Fecha</td>
							<td>Empleados</td>
							<td>Valor</td>
							<td>Tipo Nomina</td>
							<td>Quincena</td>
							<td>Tipo Pago</td>
							<td class="icon-cog"></td>
							<td class="icon-delete icon-delete-nomina"></td>
							<td class="icon-archivo icon-archivo-nomina"></td>
						</tr>

						<tr class="nomina-sel-header nomina-sel-detail" ng-repeat="item in nominas">
							<td>[[item.estatus]]</td>
							<td> <a href="#" class="sp-field" ng-click="getDetalleNomina(item.fechaNomina)">[[item.fechaNomina | date: 'dd-MM-yyyy']]</a></td>
							<td>[[item.cntEmpleados]]</td>
							<td>[[item.valorNomina | number: 2]]</td>
							<td>[[item.tipoNomina]]</td>
							<td>[[item.quincena]]</td>
							<td>[[item.tipoPago]]</td>
							<td class="icon-cog"></td>
							<td class="icon-delete icon-delete-nomina"></td>
							<td class="icon-archivo icon-archivo-nomina"></td>
						</tr>

					</table>
				</div>
				
			</div>
		</div>

		
		<div class="detalle-nomina" ng-controller="DetalleNominaCtrl">
			
			<div class="sub-menu nomina-detalle">
				Detalles de Nomina
				
			</div>

			<input type="text" ng-model="root.nomina">

			<div class="detalle-nomina-desglosado">

				
				<div class="listado-empleados-panel">

						<table class="empleados-table">
							<tr class="empleados-listado-header">
								<td>Empleado</td>
								<td>Pago</td>
							</tr>

							<tr class="empleados-listado-detail" ng-repeat="empleado in detalle">
								<td><a href="#" ng-click="selEmpleado($root.nomina, empleado)" class="select-item" ng-class="reg[empleado.id]"> [[empleado.empleado]]</a></td>
								<td>[[empleado.salario | number: 2]]</td>
							</tr>
						</table>
				</div>

				<div class="detalle-empleado-panel">
					<div class="detalle-empleado-title"> Detalles del Empleado</div>
					
					<form name="FormDetalleEmpleado" class="detalle-desglose" ng-submit="guardarEmpleado()" novalidate>

						<table class="detalle-desglose-table">
							<tr>
								<td colspan="2" class="title-ingresos">INGRESOS</td>
								<td colspan="2" class="title-egresos">EGRESOS</td>
								<td rowspan="6"> <button class="icon-save Boton boton-desglose-empleado" type="submit">Guardar</button> </td>
							</tr>
							<tr>
								<td class="first-row">Salario</td>
								<td> <input type="text" ng-bind="empleado.salario" ng-model="empleado.salario" readonly> </td>
								<td class="egreso-field">ARS </td>
								<td> <input type="text" ng-bind="empleado.ars" ng-model="empleado.ars"> </td>
							</tr>
							<tr>
								<td>Vacaciones</td>
								<td> <input type="text" ng-bind="empleado.vacaciones" ng-model="empleado.vacaciones"> </td>
								<td class="egreso-field">AFP</td>
								<td> <input type="text" ng-bind="empleado.afp" ng-model="empleado.afp"> </td>
							</tr>
							<tr>
								<td>Otros</td>
								<td> <input type="text" ng-bind="empleado.otrosIngresos" ng-model="empleado.otrosIngresos"> </td>
								<td class="egreso-field">ISR</td>
								<td> <input type="text" ng-bind="empleado.isr" ng-model="empleado.isr"> </td>
							</tr>
							<tr>
								<td>Incentivos</td>
								<td> <input type="text"> </td>
								<td class="egreso-field">Prestamos</td>
								<td> <input type="text" ng-bind="empleado.descPrestamos" ng-model="empleado.descPrestamos" readonly> </td>
							</tr>													
							<tr>
								<td></td>
								<td> </td>
								<td class="egreso-field">Ahorros</td>
								<td> <input type="text" ng-bind="empleado.descAhorros" ng-model="empleado.descAhorros" readonly> </td>
							</tr>

						</table>

					</form>
				</div>
			</div>
		</div>

	</div>


{% endblock content %}